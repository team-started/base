{#
link:       setzt den Context und modifiziert Link-Objekt
            Der Link wird in diesem Fall gesondert gewrappt, weil der Link hier nicht im Bild gespeichert wird, sondern von der Navi vorgegeben wird.
            Ansonsten würde das picture partial einen Link auch selber handlen - aber hier halt nicht.
text:       setzt den Context, damit '@object/links/link.twig' das verarbeiten kann
level:      level der Navi, hier erste Unternavi, also mindestens 2
level == 3: nur die 2. Ebene hat ein Bild (das ist etwas verwirrend, aber stimmt so ... dieser Code ruft sich rekursiv auf)
level == 2: nur die 2. Ebene ist in einem Grid
level <= 3: die Navigation ist zZ nur für max drei Level ausgelegt
children:   Flag, wenn es Unterseiten gibt.
current:    Flag für den Menüpunkt, der die aktuelle Seite repräsentiert.
active:     Flag, wenn ein Menüpunkt in der Rootline ist.
#}

{% set children = item.children ? 'has-children ' %}
{% set current = item.current ? 'current ' %}
{% set active = item.active ? 'active ' %}
{% set link = 
    {
        'config':
            {
                'uri': item.link.config.uri,
                'target': item.link.config.target,
                'title': item.link.config.title,
                'class': 'nav-link flex-grow-1 ' ~ active ~ current ~ item.link.config.class
            }
    }
%}
{% set text = item.text %}
{% set level = level + 1 %}



<li id="{{ item.uid }}" class="nav-item {{ children }}">
    <div class="d-flex justify-content-between align-items-center">
        {% include '@object/links/link.twig' with link %}
        {% if item.children and level <= 3 %}
            <button class="collapse-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#item{{ item.uid }}-collapse"></button>
        {% endif %}
    </div>

    {% if item.children and level <= 3 %}
        <ul id="item{{ item.uid }}-collapse" class="level-{{ level }} collapse list-unstyled">
            {% for item in item.children %}
                {% include '@component/navigation/navaccmenus/_navaccmenu-item/navaccmenu-item.twig' with {
                    item: item,
                    level: level
                } only %}
            {% endfor %}
        </ul>
    {% endif %}
</li>
